(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{403:function(t,e,a){"use strict";a.r(e);var s=a(5),r=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"version-22-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#version-22-6"}},[t._v("#")]),t._v(" Version 22.6")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#introduction"}},[t._v("Introduction")])]),e("li",[e("a",{attrs:{href:"#what-to-know"}},[t._v("What to know")]),e("ul",[e("li",[e("a",{attrs:{href:"#automatic-tls-setup-in-debug-mode"}},[t._v("Automatic TLS setup in DEBUG mode")])]),e("li",[e("a",{attrs:{href:"#http-3-server-rocket"}},[t._v("HTTP/3 Server 🚀")])]),e("li",[e("a",{attrs:{href:"#consistent-exception-naming"}},[t._v("Consistent exception naming")])]),e("li",[e("a",{attrs:{href:"#current-request-getter"}},[t._v("Current request getter")])]),e("li",[e("a",{attrs:{href:"#improved-api-support-for-setting-cache-control-headers"}},[t._v("Improved API support for setting cache control headers")])]),e("li",[e("a",{attrs:{href:"#custom-loads-function"}},[t._v("Custom loads function")])]),e("li",[e("a",{attrs:{href:"#deprecations-and-removals"}},[t._v("Deprecations and Removals")])])])]),e("li",[e("a",{attrs:{href:"#thank-you"}},[t._v("Thank you")])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"introduction"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[t._v("#")]),t._v(" Introduction")]),t._v(" "),e("p",[t._v("This is the second release of the version 22 "),e("RouterLink",{attrs:{to:"/en/org/policies.html#release-schedule"}},[t._v("release cycle")]),t._v('. Version 22 will be "finalized" in the December long-term support version release.')],1),t._v(" "),e("h2",{attrs:{id:"what-to-know"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-to-know"}},[t._v("#")]),t._v(" What to know")]),t._v(" "),e("p",[t._v("More details in the "),e("a",{attrs:{href:"https://sanic.readthedocs.io/en/stable/sanic/changelog.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changelog"),e("OutboundLink")],1),t._v(". Notable new or breaking features, and what to upgrade...")]),t._v(" "),e("h3",{attrs:{id:"automatic-tls-setup-in-debug-mode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#automatic-tls-setup-in-debug-mode"}},[t._v("#")]),t._v(" Automatic TLS setup in "),e("code",[t._v("DEBUG")]),t._v(" mode")]),t._v(" "),e("p",[t._v("The Sanic server can automatically setup a TLS certificate using either "),e("a",{attrs:{href:"https://github.com/FiloSottile/mkcert",target:"_blank",rel:"noopener noreferrer"}},[t._v("mkcert"),e("OutboundLink")],1),t._v(" or "),e("a",{attrs:{href:"https://github.com/python-trio/trustme",target:"_blank",rel:"noopener noreferrer"}},[t._v("trustme"),e("OutboundLink")],1),t._v(". This certificate will enable "),e("code",[t._v("https://localhost")]),t._v(" (or another local address) for local development environments. You must install either "),e("code",[t._v("mkcert")]),t._v(" or "),e("code",[t._v("trustme")]),t._v(" on your own for this to work.")]),t._v(" "),e("div",{staticClass:"multicolumn",staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-start"}},[e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sanic path.to.server:app --auto-tls --debug\n")])])])]),t._v(" "),e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("debug"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" auto_tls"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),e("p",[t._v("This feature is not available when running in "),e("code",[t._v("ASGI")]),t._v(" mode, or in "),e("code",[t._v("PRODUCTION")]),t._v(" mode. When running Sanic in production, you should be using a real TLS certificate either purchased through a legitimate vendor, or using "),e("a",{attrs:{href:"https://letsencrypt.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Let's Encrypt"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"http-3-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-3-server"}},[t._v("#")]),t._v(" HTTP/3 Server 🚀")]),t._v(" "),e("p",[t._v("In June 2022, the IETF finalized and published "),e("a",{attrs:{href:"https://www.rfc-editor.org/rfc/rfc9114.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC 9114"),e("OutboundLink")],1),t._v(", the specification for HTTP/3. In short, HTTP/3 is a "),e("strong",[t._v("very")]),t._v(" different protocol than HTTP/1.1 and HTTP/2 because it implements HTTP over UDP instead of TCP. The new HTTP protocol promises faster webpage load times and solving some of the problems of the older standards. You are encouraged to "),e("a",{attrs:{href:"https://http3-explained.haxx.se/",target:"_blank",rel:"noopener noreferrer"}},[t._v("read more about"),e("OutboundLink")],1),t._v(" this new web technology. You likely will need to install a "),e("a",{attrs:{href:"https://curl.se/docs/http3.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("capable client"),e("OutboundLink")],1),t._v(" as traditional tooling will not work.")]),t._v(" "),e("p",[t._v("Sanic server offers HTTP/3 support using "),e("a",{attrs:{href:"https://github.com/aiortc/aioquic",target:"_blank",rel:"noopener noreferrer"}},[t._v("aioquic"),e("OutboundLink")],1),t._v(". This "),e("strong",[t._v("must")]),t._v(" be installed:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("pip install sanic aioquic\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("pip install sanic[http3]\n")])])]),e("p",[t._v("To start HTTP/3, you must explicitly request it when running your application.")]),t._v(" "),e("div",{staticClass:"multicolumn",staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-start"}},[e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sanic path.to.server:app --http=3\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sanic path.to.server:app -3\n")])])])]),t._v(" "),e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("version"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),e("p",[t._v("To run both an HTTP/3 and HTTP/1.1 server simultaneously, you can use "),e("RouterLink",{attrs:{to:"/en/guide/release-notes/v22.3.html#application-multi-serve"}},[t._v("application multi-serve")]),t._v(" introduced in v22.3.")],1),t._v(" "),e("div",{staticClass:"multicolumn",staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-start"}},[e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sanic path.to.server:app --http=3 --http=1\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sanic path.to.server:app -3 -1\n")])])])]),t._v(" "),e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prepre"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("version"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prepre"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("version"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nSanic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("serve"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),e("p",[t._v("Because HTTP/3 requires TLS, you cannot start a HTTP/3 server without a TLS certificate. You should "),e("RouterLink",{attrs:{to:"/en/guide/how-to/tls.html"}},[t._v("set it up yourself")]),t._v(" or use "),e("code",[t._v("mkcert")]),t._v(" if in "),e("code",[t._v("DEBUG")]),t._v(" mode. Currently, automatic TLS setup for HTTP/3 is not compatible with "),e("code",[t._v("trustme")]),t._v(".")],1),t._v(" "),e("p",[e("strong",[t._v("👶 This feature is being released as an "),e("em",[t._v("EARLY RELEASE FEATURE")]),t._v(".")]),t._v(" It is "),e("strong",[t._v("not")]),t._v(" yet fully compliant with the HTTP/3 specification, lacking some features like "),e("a",{attrs:{href:"https://websockets.spec.whatwg.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("websockets"),e("OutboundLink")],1),t._v(", "),e("a",{attrs:{href:"https://w3c.github.io/webtransport/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webtransport"),e("OutboundLink")],1),t._v(", and "),e("a",{attrs:{href:"https://http3-explained.haxx.se/en/h3/h3-push",target:"_blank",rel:"noopener noreferrer"}},[t._v("push responses"),e("OutboundLink")],1),t._v(". Instead the intent of this release is to bring the existing HTTP request/response cycle towards feature parity with HTTP/3. Over the next several releases, more HTTP/3 features will be added and the API for it finalized.")]),t._v(" "),e("h3",{attrs:{id:"consistent-exception-naming"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#consistent-exception-naming"}},[t._v("#")]),t._v(" Consistent exception naming")]),t._v(" "),e("p",[t._v("Some of the Sanic exceptions have been renamed to be more compliant with standard HTTP response names.")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("InvalidUsage")]),t._v(" >> "),e("code",[t._v("BadRequest")])]),t._v(" "),e("li",[e("code",[t._v("MethodNotSupported")]),t._v(" >> "),e("code",[t._v("MethodNotAllowed")])]),t._v(" "),e("li",[e("code",[t._v("ContentRangeError")]),t._v(" >> "),e("code",[t._v("RangeNotSatisfiable")])])]),t._v(" "),e("p",[t._v("All old names have been aliased and will remain backwards compatible.")]),t._v(" "),e("h3",{attrs:{id:"current-request-getter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#current-request-getter"}},[t._v("#")]),t._v(" Current request getter")]),t._v(" "),e("p",[t._v("Similar to the API to access an application ("),e("code",[t._v("Sanic.get_app()")]),t._v("), there is a new method for retrieving the current request when outside of a request handler.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sanic "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Request\n\nRequest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_current"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h3",{attrs:{id:"improved-api-support-for-setting-cache-control-headers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#improved-api-support-for-setting-cache-control-headers"}},[t._v("#")]),t._v(" Improved API support for setting cache control headers")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("file")]),t._v(" response helper has some added parameters to make it easier to handle setting of the "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cache-Control"),e("OutboundLink")],1),t._v(" header.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("file")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    last_modified"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    max_age"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    no_store"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h3",{attrs:{id:"custom-loads-function"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-loads-function"}},[t._v("#")]),t._v(" Custom "),e("code",[t._v("loads")]),t._v(" function")]),t._v(" "),e("p",[t._v("Just like Sanic supports globally setting a custom "),e("code",[t._v("dumps")]),t._v(", you can now set a global custom "),e("code",[t._v("loads")]),t._v(".")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" orjson "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" loads\n\napp "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Sanic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loads"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("loads"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h3",{attrs:{id:"deprecations-and-removals"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deprecations-and-removals"}},[t._v("#")]),t._v(" Deprecations and Removals")]),t._v(" "),e("ol",[e("li",[e("em",[t._v("REMOVED")]),t._v(" - Applications may no longer opt-out of the application registry")]),t._v(" "),e("li",[e("em",[t._v("REMOVED")]),t._v(" - Custom exception handlers will no longer run after some part of an exception has been sent")]),t._v(" "),e("li",[e("em",[t._v("REMOVED")]),t._v(" - Fallback error formats cannot be set on the "),e("code",[t._v("ErrorHandler")]),t._v(" and must "),e("strong",[t._v("only")]),t._v(" be set in the "),e("code",[t._v("Config")])]),t._v(" "),e("li",[e("em",[t._v("REMOVED")]),t._v(" - Setting a custom "),e("code",[t._v("LOGO")]),t._v(" for startup is no longer allowed")]),t._v(" "),e("li",[e("em",[t._v("REMOVED")]),t._v(" - The old "),e("code",[t._v("stream")]),t._v(" response convenience method has been removed")]),t._v(" "),e("li",[e("em",[t._v("REMOVED")]),t._v(" - "),e("code",[t._v("AsyncServer.init")]),t._v(" is removed and no longer an alias of "),e("code",[t._v("AsyncServer.app.state.is_started")])])]),t._v(" "),e("h2",{attrs:{id:"thank-you"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#thank-you"}},[t._v("#")]),t._v(" Thank you")]),t._v(" "),e("p",[t._v("Thank you to everyone that participated in this release: 👏")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/ahopkins",target:"_blank",rel:"noopener noreferrer"}},[t._v("@ahopkins"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/amitay87",target:"_blank",rel:"noopener noreferrer"}},[t._v("@amitay87"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/ashleysommer",target:"_blank",rel:"noopener noreferrer"}},[t._v("@ashleysommer"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/azimovMichael",target:"_blank",rel:"noopener noreferrer"}},[t._v("@azimovMichael"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/ChihweiLHBird",target:"_blank",rel:"noopener noreferrer"}},[t._v("@ChihweiLHBird"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/kijk2869",target:"_blank",rel:"noopener noreferrer"}},[t._v("@kijk2869"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/prryplatypus",target:"_blank",rel:"noopener noreferrer"}},[t._v("@prryplatypus"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/SaidBySolo",target:"_blank",rel:"noopener noreferrer"}},[t._v("@SaidBySolo"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/sjsadowski",target:"_blank",rel:"noopener noreferrer"}},[t._v("@sjsadowski"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/timmo001",target:"_blank",rel:"noopener noreferrer"}},[t._v("@timmo001"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/zozzz",target:"_blank",rel:"noopener noreferrer"}},[t._v("@zozzz"),e("OutboundLink")],1)]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("If you enjoy the project, please consider contributing. Of course we love code contributions, but we also love contributions in any form. Consider writing some documentation, showing off use cases, joining conversations and making your voice known, and if you are able: "),e("a",{attrs:{href:"https://opencollective.com/sanic-org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("financial contributions"),e("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=r.exports}}]);
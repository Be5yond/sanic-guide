(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{443:function(t,e,a){"use strict";a.r(e);var s=a(5),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"http-methods"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-methods"}},[t._v("#")]),t._v(" HTTP Methods")]),t._v(" "),e("h2",{attrs:{id:"auto-endpoints"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#auto-endpoints"}},[t._v("#")]),t._v(" Auto-endpoints")]),t._v(" "),e("p",[t._v("The default behavior is to automatically generate "),e("code",[t._v("HEAD")]),t._v(" endpoints for all "),e("code",[t._v("GET")]),t._v(" routes, and "),e("code",[t._v("OPTIONS")]),t._v(" endpoints for all\nroutes. Additionally, there is the option to automatically generate "),e("code",[t._v("TRACE")]),t._v(" endpoints. However, these are not enabled by\ndefault.")]),t._v(" "),e("tabs",[e("tab",{attrs:{name:"HEAD"}},[e("ul",[e("li",[e("strong",[t._v("Configuration")]),t._v(": "),e("code",[t._v("AUTO_HEAD")]),t._v(" (default "),e("code",[t._v("True")]),t._v(")")]),t._v(" "),e("li",[e("strong",[t._v("MDN")]),t._v(": "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/HEAD",target:"_blank",rel:"noopener noreferrer"}},[t._v("Read more"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("A "),e("code",[t._v("HEAD")]),t._v(" request provides the headers and an otherwise identical response to what a "),e("code",[t._v("GET")]),t._v(" request would provide.\nHowever, it does not actually return the body.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello_world")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" text"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, world."')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("Given the above route definition, Sanic Extensions will enable "),e("code",[t._v("HEAD")]),t._v(" responses, as seen here.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ curl localhost:8000 --head\nHTTP/1.1 200 OK\naccess-control-allow-origin: *\ncontent-length: 13\nconnection: keep-alive\ncontent-type: text/plain; charset=utf-8\n")])])])]),t._v(" "),e("tab",{attrs:{name:"OPTIONS"}},[e("ul",[e("li",[e("strong",[t._v("Configuration")]),t._v(": "),e("code",[t._v("AUTO_OPTIONS")]),t._v(" (default "),e("code",[t._v("True")]),t._v(")")]),t._v(" "),e("li",[e("strong",[t._v("MDN")]),t._v(": "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/OPTIONS",target:"_blank",rel:"noopener noreferrer"}},[t._v("Read more"),e("OutboundLink")],1)])]),t._v(" "),e("p",[e("code",[t._v("OPTIONS")]),t._v(" requests provide the recipient with details about how the client is allowed to communicate with a given\nendpoint.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello_world")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" text"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, world."')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("Given the above route definition, Sanic Extensions will enable "),e("code",[t._v("OPTIONS")]),t._v(" responses, as seen here.")]),t._v(" "),e("p",[t._v("It is important to note that we also see "),e("code",[t._v("access-control-allow-origins")]),t._v(" in this example. This is because\nthe "),e("RouterLink",{attrs:{to:"/en/plugins/sanic-ext/http/cors.html"}},[t._v("CORS protection")]),t._v(" is enabled by default.")],1),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ curl localhost:8000 -X OPTIONS -i\nHTTP/1.1 204 No Content\nallow: GET,HEAD,OPTIONS\naccess-control-allow-origin: *\nconnection: keep-alive\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Even though Sanic Extensions will setup these routes for you automatically, if you decide to manually create")]),t._v(" "),e("p",[t._v("an "),e("code",[t._v("@app.options")]),t._v(" route, it will "),e("em",[t._v("not")]),t._v(" be overridden.")])])]),t._v(" "),e("tab",{attrs:{name:"TRACE"}},[e("ul",[e("li",[e("strong",[t._v("Configuration")]),t._v(": "),e("code",[t._v("AUTO_TRACE")]),t._v(" (default "),e("code",[t._v("False")]),t._v(")")]),t._v(" "),e("li",[e("strong",[t._v("MDN")]),t._v(": "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/TRACE",target:"_blank",rel:"noopener noreferrer"}},[t._v("Read more"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("By default, "),e("code",[t._v("TRACE")]),t._v(" endpoints will "),e("strong",[t._v("not")]),t._v(" be automatically created. However, Sanic Extensions "),e("strong",[t._v("will allow")]),t._v(" you to\ncreate them if you wanted. This is something that is not allowed in vanilla Sanic.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" methods"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"trace"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("handler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),e("p",[t._v("To enable auto-creation of these endpoints, you must first enable them when extending Sanic.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sanic_ext "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Extend"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Config\n\napp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extend"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http_auto_trace"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("Now, assuming you have some endpoints setup, you can trace them as shown here:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ curl localhost:8000 -X TRACE\nTRACE / HTTP/1.1\nHost: localhost:9999\nUser-Agent: curl/7.76.1\nAccept: */*\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Setting up `AUTO_TRACE` can be super helpful, especially when your application is deployed behind a proxy since")]),t._v(" "),e("p",[t._v("it will help you determine how the proxy is behaving.")])])])],1),t._v(" "),e("h2",{attrs:{id:"additional-method-support"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#additional-method-support"}},[t._v("#")]),t._v(" Additional method support")]),t._v(" "),e("p",[t._v("Vanilla Sanic allows you to build endpoints with the following HTTP methods:")]),t._v(" "),e("ul",[e("li",[e("RouterLink",{attrs:{to:"/en/guide/basics/routing.html#get"}},[t._v("GET")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/en/guide/basics/routing.html#post"}},[t._v("POST")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/en/guide/basics/routing.html#put"}},[t._v("PUT")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/en/guide/basics/routing.html#head"}},[t._v("HEAD")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/en/guide/basics/routing.html#options"}},[t._v("OPTIONS")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/en/guide/basics/routing.html#patch"}},[t._v("PATCH")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/en/guide/basics/routing.html#delete"}},[t._v("DELETE")])],1)]),t._v(" "),e("p",[t._v("See "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN Web Docs"),e("OutboundLink")],1),t._v(" for more.")]),t._v(" "),e("div",{staticClass:"multicolumn",staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-start"}},[e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("p",[t._v('There are, however, two more "standard" HTTP methods: '),e("code",[t._v("TRACE")]),t._v(" and "),e("code",[t._v("CONNECT")]),t._v(". Sanic Extensions will allow you to build\nendpoints using these methods, which would otherwise not be allowed.")]),t._v(" "),e("p",[t._v("It is worth pointing out that this will "),e("em",[t._v("NOT")]),t._v(" enable convenience methods: "),e("code",[t._v("@app.trace")]),t._v(" or "),e("code",[t._v("@app.connect")]),t._v(". You need to\nuse "),e("code",[t._v("@app.route")]),t._v(" as shown in the example here.")])]),t._v(" "),e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" methods"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"trace"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"connect"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("handler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" empty"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])])],1)}),[],!1,null,null,null);e.default=n.exports}}]);
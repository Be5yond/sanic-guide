(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{374:function(t,e,s){"use strict";s.r(e);var a=s(5),o=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"cookies"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookies"}},[t._v("#")]),t._v(" Cookies")]),t._v(" "),e("h2",{attrs:{id:"reading"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reading"}},[t._v("#")]),t._v(" Reading")]),t._v(" "),e("div",{staticClass:"multicolumn",staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-start"}},[e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("p",[t._v("Cookies can be accessed via the "),e("code",[t._v("Request")]),t._v(" object’s "),e("code",[t._v("cookies")]),t._v(" dictionary.")])]),t._v(" "),e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/cookie"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    test_cookie "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookies"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" text"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string-interpolation"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Test cookie: ')]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("test_cookie"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("FYI")]),t._v(" "),e("p",[t._v("💡 The "),e("code",[t._v("request.cookies")]),t._v(" object is one of a few types that is a dictionary with each value being a "),e("code",[t._v("list")]),t._v(". This is because HTTP allows a single key to be reused to send multiple values.")]),t._v(" "),e("p",[t._v("Most of the time you will want to use the "),e("code",[t._v(".get()")]),t._v(" method to access the first element and not a "),e("code",[t._v("list")]),t._v(". If you do want a "),e("code",[t._v("list")]),t._v(" of all items, you can use "),e("code",[t._v(".getlist()")]),t._v(".")]),t._v(" "),e("p",[e("em",[t._v("Added in v23.3")])])]),t._v(" "),e("h2",{attrs:{id:"writing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#writing"}},[t._v("#")]),t._v(" Writing")]),t._v(" "),e("div",{staticClass:"multicolumn",staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-start"}},[e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("p",[t._v("When returning a response, cookies can be set on the "),e("code",[t._v("Response")]),t._v(" object: "),e("code",[t._v("response.cookies")]),t._v(". This object is an instance of "),e("code",[t._v("CookieJar")]),t._v(" which is a special sort of dictionary that automatically will write the response headers for you.")])]),t._v(" "),e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/cookie"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    response "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" text"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"There\'s a cookie up in this response"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_cookie"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"It worked!"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        domain"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('".yummy-yummy-cookie.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        httponly"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response\n")])])])])]),t._v(" "),e("p",[t._v("Response cookies can be set like dictionary values and have the following parameters available:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("path: str")]),t._v(" - The subset of URLs to which this cookie applies. Defaults to "),e("code",[t._v("/")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("domain: str")]),t._v(" - Specifies the domain for which the cookie is valid. An explicitly specified domain must always start with a dot.")]),t._v(" "),e("li",[e("code",[t._v("max_age: int")]),t._v(" - Number of seconds the cookie should live for.")]),t._v(" "),e("li",[e("code",[t._v("expires: datetime")]),t._v(" - The time for the cookie to expire on the client’s browser. Usually it is better to use max-age instead.")]),t._v(" "),e("li",[e("code",[t._v("secure: bool")]),t._v(" - Specifies whether the cookie will only be sent via HTTPS. Defaults to "),e("code",[t._v("True")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("httponly: bool")]),t._v(" - Specifies whether the cookie cannot be read by JavaScript.")]),t._v(" "),e("li",[e("code",[t._v("samesite: str")]),t._v(" - Available values: Lax, Strict, and None. Defaults to "),e("code",[t._v("Lax")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("comment: str")]),t._v(" - A comment (metadata).")]),t._v(" "),e("li",[e("code",[t._v("host_prefix: bool")]),t._v(" - Whether to add the "),e("code",[t._v("__Host-")]),t._v(" prefix to the cookie.")]),t._v(" "),e("li",[e("code",[t._v("secure_prefix: bool")]),t._v(" - Whether to add the "),e("code",[t._v("__Secure-")]),t._v(" prefix to the cookie.")]),t._v(" "),e("li",[e("code",[t._v("partitioned: bool")]),t._v(" - Whether to mark the cookie as partitioned.")])]),t._v(" "),e("p",[t._v("To better understand the implications and usage of these values, it might be helpful to read the "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN documentation"),e("OutboundLink")],1),t._v(" on "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie",target:"_blank",rel:"noopener noreferrer"}},[t._v("setting cookies"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("FYI")]),t._v(" "),e("p",[t._v("By default, Sanic will set the "),e("code",[t._v("secure")]),t._v(" flag to "),e("code",[t._v("True")]),t._v(" to ensure that cookies are only sent over HTTPS as a sensible default. This should not be impactful for local development since secure cookies over HTTP should still be sent to "),e("code",[t._v("localhost")]),t._v(". For more information, you should read the "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#restrict_access_to_cookies",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN documentation"),e("OutboundLink")],1),t._v(" on "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#Secure",target:"_blank",rel:"noopener noreferrer"}},[t._v("secure cookies"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("h2",{attrs:{id:"deleting"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deleting"}},[t._v("#")]),t._v(" Deleting")]),t._v(" "),e("div",{staticClass:"multicolumn",staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-start"}},[e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("p",[t._v("Cookies can be removed semantically or explicitly.")])]),t._v(" "),e("div",{staticClass:"multicolumn-column",staticStyle:{"flex-grow":"1","flex-basis":"0"}},[e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/cookie"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    response "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" text"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Time to eat some cookies muahaha"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This cookie will be set to expire in 0 seconds")]),t._v("\n    response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delete_cookie"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eat_me"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This cookie will self destruct in 5 seconds")]),t._v("\n    response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_cookie"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fast_bake"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Be quick!"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" max_age"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response\n")])])]),e("p",[e("em",[t._v("Don't forget to add "),e("code",[t._v("path")]),t._v(" or "),e("code",[t._v("domain")]),t._v(" if needed!")])])])]),t._v(" "),e("h2",{attrs:{id:"eating"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#eating"}},[t._v("#")]),t._v(" Eating")]),t._v(" "),e("p",[t._v("Sanic likes cookies 🍪")])])}),[],!1,null,null,null);e.default=o.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{636:function(t,a,s){"use strict";s.r(a);var n=s(20),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"バージョン21-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#バージョン21-6"}},[t._v("#")]),t._v(" バージョン21.6")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#概要"}},[t._v("概要")])]),s("li",[s("a",{attrs:{href:"#知っておきたいこと"}},[t._v("知っておきたいこと")]),s("ul",[s("li",[s("a",{attrs:{href:"#streaminghttpresponse-の非推奨化"}},[t._v("StreamingHTTPResponseの非推奨化")])]),s("li",[s("a",{attrs:{href:"#compositionview-の非推奨化"}},[t._v("CompositionViewの非推奨化")])]),s("li",[s("a",{attrs:{href:"#パスパラメータ型の非推奨-string-と-integer-。"}},[t._v("パスパラメータ型の非推奨: stringとinteger。")])]),s("li",[s("a",{attrs:{href:"#バージョン0-7-ルーターアップグレード"}},[t._v("バージョン0.7 ルーターアップグレード")])]),s("li",[s("a",{attrs:{href:"#eof-によるインラインストリーミング"}},[t._v("eof()によるインラインストリーミング")])]),s("li",[s("a",{attrs:{href:"#新しいパスパラメータタイプ-slug"}},[t._v("新しいパスパラメータタイプ: slug")])]),s("li",[s("a",{attrs:{href:"#アプリケーションとブループリントの名称の厳格化、非推奨化"}},[t._v("アプリケーションとブループリントの名称の厳格化、非推奨化")])]),s("li",[s("a",{attrs:{href:"#route-オブジェクトへの新しいアクセス-route-uri"}},[t._v("Route オブジェクトへの新しいアクセス: route.uri.")])]),s("li",[s("a",{attrs:{href:"#ip-に影響を与える-request-オブジェクトの新しいアクセッサ"}},[t._v("IP に影響を与えるRequestオブジェクトの新しいアクセッサ")])]),s("li",[s("a",{attrs:{href:"#config-と-sanic-ctx-オブジェクトの交互使用"}},[t._v("Config と Sanic.ctx オブジェクトの交互使用")])]),s("li",[s("a",{attrs:{href:"#sanic-cli-の改善点"}},[t._v("Sanic CLI の改善点")])]),s("li",[s("a",{attrs:{href:"#バージョンプレフィックス"}},[t._v("バージョンプレフィックス")])]),s("li",[s("a",{attrs:{href:"#シグナルイベント自動登録"}},[t._v("シグナルイベント自動登録")])]),s("li",[s("a",{attrs:{href:"#無限に再利用可能で入れ子にできる-blueprint-と-blueprintgroup-です。"}},[t._v("無限に再利用可能で入れ子にできる Blueprint と BlueprintGroup です。")])]),s("li",[s("a",{attrs:{href:"#http-メソッドを-enum-として使用できるように"}},[t._v("HTTP メソッドを Enum として使用できるように")])]),s("li",[s("a",{attrs:{href:"#httpmethodview-の機能拡張"}},[t._v("HTTPMethodView の機能拡張")])])])]),s("li",[s("a",{attrs:{href:"#ニュース"}},[t._v("ニュース")]),s("ul",[s("li",[s("a",{attrs:{href:"#discordとサポートフォーラム"}},[t._v("Discordとサポートフォーラム")])]),s("li",[s("a",{attrs:{href:"#sco-2022年選挙"}},[t._v("SCO 2022年選挙")])]),s("li",[s("a",{attrs:{href:"#新しいプロジェクトが進行中"}},[t._v("新しいプロジェクトが進行中")])])])]),s("li",[s("a",{attrs:{href:"#謝礼"}},[t._v("謝礼")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"概要"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[t._v("#")]),t._v(" 概要")]),t._v(" "),s("p",[t._v("これは、バージョン21の"),s("RouterLink",{attrs:{to:"/ja/guide/project/policies.html#release-schedule"}},[t._v("リリースサイクル")]),t._v("の2回目のリリースです。12月の長期サポート版でバージョン21が「確定」する前に、9月にもう1回リリースされる予定です。21.3 からは、ルーターが独自のパッケージに移動したことにお気づきかもしれません。"),s("a",{attrs:{href:"https://pypi.org/project/sanic-routing",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("sanic-routing")]),s("OutboundLink")],1),t._v(" です。この変更は当分続きそうです。このリリースから、必要な最小バージョンは 0.7.0 になりました。")],1),t._v(" "),s("h2",{attrs:{id:"知っておきたいこと"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#知っておきたいこと"}},[t._v("#")]),t._v(" 知っておきたいこと")]),t._v(" "),s("p",[t._v("詳しくは"),s("a",{attrs:{href:"https://sanic.readthedocs.io/en/stable/sanic/changelog.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("変更履歴"),s("OutboundLink")],1),t._v("をご覧ください。注目すべき新機能・不具合、アップグレード対象など...")]),t._v(" "),s("h3",{attrs:{id:"streaminghttpresponseの非推奨化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#streaminghttpresponseの非推奨化"}},[t._v("#")]),t._v(" "),s("code",[t._v("StreamingHTTPResponse")]),t._v("の非推奨化")]),t._v(" "),s("p",[s("code",[t._v("StreamingHTTPResponse")]),t._v(" の使用は非推奨となり、21.12リリースで削除される予定です。これは "),s("code",[t._v("sanic.response.stream")]),t._v(" と "),s("code",[t._v("sanic.response.file_stream")]),t._v(" の両方に影響し、どちらもフード内で "),s("code",[t._v("StreamingHTTPResponse")]),t._v(" をインスタンス化します。")]),t._v(" "),s("p",[t._v("正確な移行経路はまだ決定されていませんが、"),s("code",[t._v("sanic.response.stream")]),t._v(" と "),s("code",[t._v("sanic.response.file_stream")]),t._v(" は何らかの形で v21.12 に便利な演算子として存在し続けることになります。9 月のリリースまでに最終決定する予定ですので、この夏中に詳細をご確認ください。")]),t._v(" "),s("h3",{attrs:{id:"compositionviewの非推奨化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#compositionviewの非推奨化"}},[t._v("#")]),t._v(" "),s("code",[t._v("CompositionView")]),t._v("の非推奨化")]),t._v(" "),s("p",[s("code",[t._v("CompositionView")]),t._v(" の使用は非推奨となり、21.12で削除される予定です。")]),t._v(" "),s("h3",{attrs:{id:"パスパラメータ型の非推奨-stringとinteger。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#パスパラメータ型の非推奨-stringとinteger。"}},[t._v("#")]),t._v(" パスパラメータ型の非推奨: "),s("code",[t._v("string")]),t._v("と"),s("code",[t._v("integer")]),t._v("。")]),t._v(" "),s("p",[t._v("今後は、パスパラメータの型として、 "),s("code",[t._v("string")]),t._v(" や "),s("code",[t._v("number")]),t._v(" ではなく、 "),s("code",[t._v("str")]),t._v(" や "),s("code",[t._v("float")]),t._v(" を使用する必要があります。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/<foo:str>/<bar:float>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("p",[t._v("既存の "),s("code",[t._v("string")]),t._v(" と "),s("code",[t._v("number")]),t._v(" 型はエイリアスとして引き続き動作しますが、v21.12 で削除される予定です。")]),t._v(" "),s("h3",{attrs:{id:"バージョン0-7-ルーターアップグレード"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#バージョン0-7-ルーターアップグレード"}},[t._v("#")]),t._v(" バージョン0.7 ルーターアップグレード")]),t._v(" "),s("p",[t._v("これは多くのバグフィックスを含み、v0.6 よりも幅広いエッジケースをより優雅に扱えるようになりました。もし、サポートされていないパターンがあれば、"),s("a",{attrs:{href:"https://github.com/sanic-org/sanic-routing/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("報告してください"),s("OutboundLink")],1),t._v(". 解決された問題のいくつかは "),s("code",[t._v("sanic-routing")]),t._v("の"),s("a",{attrs:{href:"https://github.com/sanic-org/sanic-routing/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("リリースノート"),s("OutboundLink")],1),t._v(" で見ることができます。")]),t._v(" "),s("h3",{attrs:{id:"eof-によるインラインストリーミング"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eof-によるインラインストリーミング"}},[t._v("#")]),t._v(" "),s("code",[t._v("eof()")]),t._v("によるインラインストリーミング")]),t._v(" "),s("p",[t._v("バージョン21.3には、"),s("a",{attrs:{href:"https://sanicframework.org/en/guide/release-notes/v21.3.html#what-to-know",target:"_blank",rel:"noopener noreferrer"}},[t._v("ストリーミングの処理方法の大きな変更"),s("OutboundLink")],1),t._v("が含まれていて、導入されたパターンがデフォルトにります(下記参照)。便利なことに、新しい "),s("code",[t._v("response.eof()")]),t._v(" メソッドが含まれています。これは、最終的なデータがクライアントにプッシュされた時点で呼び出されるべきものです。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    response "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("respond"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content_type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/csv"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo,"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eof"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response\n")])])]),s("h3",{attrs:{id:"新しいパスパラメータタイプ-slug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新しいパスパラメータタイプ-slug"}},[t._v("#")]),t._v(" 新しいパスパラメータタイプ: "),s("code",[t._v("slug")])]),t._v(" "),s("p",[t._v("動的なパスセグメントを "),s("code",[t._v("slug")]),t._v(" として指定し、適切なマッチングを行うことができるようになりました。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/articles/<article_slug:slug>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("article")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" article_slug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("p",[t._v("スラッグは小文字のアルファベットか数字で構成されていなければなりません。ハイフン("),s("code",[t._v("-")]),t._v(")を含むことができますが、最初の文字にはできません。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("this-is-a-slug\nwith-123-is-also-a-slug\n111-at-start-is-a-slug\nNOT-a-slug\n-NOT-a-slug\n")])])]),s("h3",{attrs:{id:"アプリケーションとブループリントの名称の厳格化、非推奨化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#アプリケーションとブループリントの名称の厳格化、非推奨化"}},[t._v("#")]),t._v(" アプリケーションとブループリントの名称の厳格化、非推奨化")]),t._v(" "),s("p",[t._v("あなたのアプリケーションと"),s("code",[t._v("Blueprint")]),t._v("インスタンスは、より厳しい要件に適合しなければなりません。")]),t._v(" "),s("ol",[s("li",[t._v("英数字のみからなること。")]),t._v(" "),s("li",[t._v("ハイフン("),s("code",[t._v("-")]),t._v(")またはアンダースコア("),s("code",[t._v("_")]),t._v(")を含むことはできる。")]),t._v(" "),s("li",[t._v("文字（大文字または小文字）で始まること。")])]),t._v(" "),s("p",[t._v("Pythonの変数の命名規則と似ていますが、ハイフン("),s("code",[t._v("-")]),t._v(")を許容することが追加されています。")]),t._v(" "),s("p",[t._v("より緩やかな基準は廃止されました。21.12 からは、非適合は起動時のエラーになります。")]),t._v(" "),s("h3",{attrs:{id:"route-オブジェクトへの新しいアクセス-route-uri"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#route-オブジェクトへの新しいアクセス-route-uri"}},[t._v("#")]),t._v(" "),s("code",[t._v("Route")]),t._v(" オブジェクトへの新しいアクセス: "),s("code",[t._v("route.uri")]),t._v(".")]),t._v(" "),s("p",[t._v("v21.3 の "),s("code",[t._v("Route")]),t._v(" オブジェクトは "),s("code",[t._v("uri")]),t._v(" 属性を持たなくなりました。その代わりに、"),s("code",[t._v("route.path")]),t._v("というクローズを取得することができました。しかし、 "),s("code",[t._v("sanic-routing")]),t._v(" の動作の関係で、 "),s("code",[t._v("path")]),t._v(" プロパティには先頭の "),s("code",[t._v("/")]),t._v(" が"),s("em",[t._v("ありません")]),t._v("。これは修正され、現在は "),s("code",[t._v("route.uri")]),t._v(" にスラッシュが含まれるようになりました。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uri "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"/')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n")])])]),s("h3",{attrs:{id:"ip-に影響を与えるrequestオブジェクトの新しいアクセッサ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ip-に影響を与えるrequestオブジェクトの新しいアクセッサ"}},[t._v("#")]),t._v(" IP に影響を与える"),s("code",[t._v("Request")]),t._v("オブジェクトの新しいアクセッサ")]),t._v(" "),s("p",[t._v("着信リクエストのIPアドレスにアクセスするために、Sanicはリクエストオブジェクトに "),s("code",[t._v("request.ip")]),t._v(" という便利なアクセッサを持っていました。これは新しいものではなく、開いているHTTP接続についての詳細を提供するオブジェクト "),s("code",[t._v("request.conn_info")]),t._v(" から来ています。")]),t._v(" "),s("p",[t._v("現在のバージョンでは、この "),s("code",[t._v("conn_info")]),t._v(" オブジェクトに新しい "),s("code",[t._v("client_ip")]),t._v(' アクセッサが追加されています。IPv4 の場合は、特に違いは感じないでしょう。しかし、IPv6アプリケーションでは、新しいアクセサはアドレスの "unwrapped "バージョンを提供します。次のような例を考えてみましょう。')]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"request.ip"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"request.conn_info.client"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conn_info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"request.conn_info.client_ip"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conn_info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client_ip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sock"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("my_ipv6_sock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("::1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":8000\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"request.ip"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"::1"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"request.conn_info.client"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[::1]"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"request.conn_info.client_ip"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"::1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("h3",{attrs:{id:"config-と-sanic-ctx-オブジェクトの交互使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#config-と-sanic-ctx-オブジェクトの交互使用"}},[t._v("#")]),t._v(" "),s("code",[t._v("Config")]),t._v(" と "),s("code",[t._v("Sanic.ctx")]),t._v(" オブジェクトの交互使用")]),t._v(" "),s("p",[t._v("独自のconfigとcontextオブジェクトをSanicアプリケーションに渡すことができるようになりました。カスタムコンフィギュレーションは "),s("code",[t._v("sanic.config.Config")]),t._v(" のサブクラスで"),s("strong",[t._v("あるべきです")]),t._v("。コンテキストオブジェクトは、何の制限もなく、好きなものを使用できます。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\nconfig "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CustomConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Sanic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"custom"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("isinstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CustomConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("そして...")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\nctx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CustomContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Sanic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"custom"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("isinstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CustomContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"sanic-cli-の改善点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sanic-cli-の改善点"}},[t._v("#")]),t._v(" Sanic CLI の改善点")]),t._v(" "),s("ol",[s("li",[t._v("既存機能に対する新しいフラグ："),s("code",[t._v("--auto-reload")]),t._v("。")]),t._v(" "),s("li",[t._v("既存の引数に対するいくつかの新しい略記フラグ")]),t._v(" "),s("li",[t._v("新機能: "),s("code",[t._v("--factory")])]),t._v(" "),s("li",[t._v("新機能: "),s("code",[t._v("--simple")])]),t._v(" "),s("li",[t._v("新機能: "),s("code",[t._v("--reload-dir")]),t._v(".")])]),t._v(" "),s("h4",{attrs:{id:"ファクトリーアプリケーション"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ファクトリーアプリケーション"}},[t._v("#")]),t._v(" ファクトリーアプリケーション")]),t._v(" "),s("p",[t._v("ファクトリーパターン ("),s("code",[t._v("sanic.Sanic")]),t._v("インスタンスを返す関数) に従ったアプリケーションでは、Sanic CLI から "),s("code",[t._v("--factory")]),t._v(" フラグを使用してアプリケーションを起動することができるようになりました。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sanic "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Blueprint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Sanic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text\n\nbp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Blueprint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@bp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"😎"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create_app")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Sanic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Sanic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("blueprint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" app\n")])])]),s("p",[t._v("以下のように動かすことができます。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ sanic path.to:create_app --factory \n")])])]),s("h4",{attrs:{id:"sanicシンプルサーバー"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sanicシンプルサーバー"}},[t._v("#")]),t._v(" Sanicシンプルサーバー")]),t._v(" "),s("p",[t._v("Sanic CLIには、ディレクトリをウェブサーバーとして提供するためのシンプルなパターンが含まれるようになりました。これは、ディレクトリルートにある "),s("code",[t._v("index.html")]),t._v(" を探します。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ sanic ./path/to/dir --simple\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("この機能はまだ初期"),s("em",[t._v("ベータ")]),t._v("モードです。この機能は、今後変更される可能性があります。")])]),t._v(" "),s("h4",{attrs:{id:"リロード先ディレクトリの追加"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#リロード先ディレクトリの追加"}},[t._v("#")]),t._v(" リロード先ディレクトリの追加")]),t._v(" "),s("p",[s("code",[t._v("debug")]),t._v(" または "),s("code",[t._v("auto-reload")]),t._v(" のいずれかを使用する場合、Sanic が新しいファイルを監視するための追加のディレクトリを含めることができます。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("sanic "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". --reload-dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/path/to/foo --reload-dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/path/to/bar\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("アプリケーション・ディレクトリでこれをインクルードする必要は"),s("em",[t._v("ありません")]),t._v("。Sanic はアプリケーション内の Python ファイルが変更されると、自動的にリロードします。静的なファイルが更新されたときに、アプリケーションをリッスンして更新したい場合は、 "),s("code",[t._v("reload-dir")]),t._v(" 引数を使用する必要があります。")])]),t._v(" "),s("h3",{attrs:{id:"バージョンプレフィックス"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#バージョンプレフィックス"}},[t._v("#")]),t._v(" バージョンプレフィックス")]),t._v(" "),s("p",[s("code",[t._v("version")]),t._v("を追加する場合、ルートには "),s("code",[t._v("/v<YOUR_VERSION_NUM>")]),t._v(" というプレフィックスが付きます。これは常にパスの先頭になります。これは新しいものではありません。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /v1/my/path")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/my/path"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("これで、プレフィックスを変更することができます (したがって、パスのセグメントをバージョンの "),s("em",[t._v("前に")]),t._v(" 追加することができます)。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /api/v1/my/path")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/my/path"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" version_prefix"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/v"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("引数 "),s("code",[t._v("version_prefix")]),t._v(" は、以下のように定義することができます。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("app.route")]),t._v(" と "),s("code",[t._v("bp.route")]),t._v(" デコレータ (そして、すべての便利なデコレータ)")]),t._v(" "),s("li",[s("code",[t._v("Blueprint")]),t._v("のインスタンス化")]),t._v(" "),s("li",[s("code",[t._v("Blueprint.group")]),t._v("コンストラクタ")]),t._v(" "),s("li",[s("code",[t._v("BlueprintGroup")]),t._v("のインスタンス化")]),t._v(" "),s("li",[s("code",[t._v("app.blueprint")]),t._v("の登録")])]),t._v(" "),s("h3",{attrs:{id:"シグナルイベント自動登録"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#シグナルイベント自動登録"}},[t._v("#")]),t._v(" シグナルイベント自動登録")]),t._v(" "),s("p",[s("code",[t._v("config.EVENT_AUTOREGISTER")]),t._v(" を "),s("code",[t._v("True")]),t._v(" に設定すると、以前にシグナルハンドラが定義されていない場合でも、任意のシグナルイベントを待ち受けることができるようになります。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"do.something.start"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("signal_handler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" do_something"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dispatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"do.something.complete"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# somethere else in your app:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"do.something.complete"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"無限に再利用可能で入れ子にできる-blueprint-と-blueprintgroup-です。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#無限に再利用可能で入れ子にできる-blueprint-と-blueprintgroup-です。"}},[t._v("#")]),t._v(" 無限に再利用可能で入れ子にできる "),s("code",[t._v("Blueprint")]),t._v(" と "),s("code",[t._v("BlueprintGroup")]),t._v(" です。")]),t._v(" "),s("p",[t._v("1つの "),s("code",[t._v("Blueprint")]),t._v(" を複数のグループに割り当てて再利用することはできません。また、グループ自体も他のグループと無限にネストすることができます。これにより、無限の構成が可能になります。")]),t._v(" "),s("h3",{attrs:{id:"http-メソッドを-enum-として使用できるように"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-メソッドを-enum-として使用できるように"}},[t._v("#")]),t._v(" HTTP メソッドを "),s("code",[t._v("Enum")]),t._v(" として使用できるように")]),t._v(" "),s("p",[t._v("Sanicに"),s("code",[t._v("sanic.HTTPMethod")]),t._v(" が追加されました。これは "),s("code",[t._v("Enum")]),t._v(" で、文字列と同じように使用することができます。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sanic "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Sanic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HTTPMethod\n\n"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" methods"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"post"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PUT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HTTPMethod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PATCH"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("h3",{attrs:{id:"httpmethodview-の機能拡張"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#httpmethodview-の機能拡張"}},[t._v("#")]),t._v(" "),s("code",[t._v("HTTPMethodView")]),t._v(" の機能拡張")]),t._v(" "),s("p",[t._v("クラスベースのビューは、3つの方法のうちの1つで取り付けられるようになりました。")]),t._v(" "),s("p",[s("strong",[t._v("オプション1 - 既存")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DummyView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HTTPMethodView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DummyView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("as_view"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dummy"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("オプション2 - "),s("code",[t._v("attach")]),t._v(" メソッドから")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DummyView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HTTPMethodView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\nDummyView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("オプション 3 - "),s("code",[t._v("__init_subclass__")]),t._v(" でのクラス定義から")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DummyView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HTTPMethodView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attach"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("p",[t._v("オプション2と3は、CBVが他のファイルにある場合に有効です。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sanic "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Sanic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HTTPMethodView\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DummyView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HTTPMethodView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attach"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Sanic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("h2",{attrs:{id:"ニュース"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ニュース"}},[t._v("#")]),t._v(" ニュース")]),t._v(" "),s("h3",{attrs:{id:"discordとサポートフォーラム"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#discordとサポートフォーラム"}},[t._v("#")]),t._v(" Discordとサポートフォーラム")]),t._v(" "),s("p",[t._v("まだコミュニティに参加していない方は、"),s("a",{attrs:{href:"https://discord.gg/FARQzAEMAA",target:"_blank",rel:"noopener noreferrer"}},[t._v("Discord server"),s("OutboundLink")],1),t._v(" と "),s("a",{attrs:{href:"https://community.sanicframework.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Community Forums"),s("OutboundLink")],1),t._v(" に参加することで一員になることができます。また、Twitterで"),s("a",{attrs:{href:"https://twitter.com/sanicframework",target:"_blank",rel:"noopener noreferrer"}},[t._v("@sanicframework"),s("OutboundLink")],1),t._v("をフォローしてください。")]),t._v(" "),s("h3",{attrs:{id:"sco-2022年選挙"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sco-2022年選挙"}},[t._v("#")]),t._v(" SCO 2022年選挙")]),t._v(" "),s("p",[t._v("夏🏝 / 冬❄️（あなたのいる半球による）がやってきましたね。それは、SCOの選挙を行うことを意味します。今年は、以下のポジションがあります。")]),t._v(" "),s("ul",[s("li",[t._v("運営評議会メンバー（任期2年）")]),t._v(" "),s("li",[t._v("ステアリング・カウンシル・メンバー（任期2年）")]),t._v(" "),s("li",[t._v("ステアリング・カウンシル・メンバー（任期1年）")]),t._v(" "),s("li",[t._v("リリースマネージャー v22")]),t._v(" "),s("li",[t._v("リリースマネージャー v22")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/vltr",target:"_blank",rel:"noopener noreferrer"}},[t._v("@vltr"),s("OutboundLink")],1),t._v("は、2年目の運営評議会を終えるために留任することになりました。")]),t._v(" "),s("p",[t._v("もっと詳しく知りたい方は、SCO "),s("RouterLink",{attrs:{to:"/ja/guide/project/scope.html#roles-and-responsibilities"}},[t._v("roles and responsibilities")]),t._v(" や、Adam Hopkins の Discord を読んでみてください。")],1),t._v(" "),s("p",[t._v("ノミネートは9月1日に開始されます。詳細は追ってフォーラムでお知らせします。")]),t._v(" "),s("h3",{attrs:{id:"新しいプロジェクトが進行中"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新しいプロジェクトが進行中"}},[t._v("#")]),t._v(" 新しいプロジェクトが進行中")]),t._v(" "),s("p",[t._v("SCOの傘下に新しいプロジェクトを追加しました。"),s("a",{attrs:{href:"https://github.com/sanic-org/sanic-ext",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("sanic-ext")]),s("OutboundLink")],1),t._v(" です。このプロジェクトはまだリリースされておらず、活発に開発が行われています。このプロジェクトの目標は、最終的に "),s("a",{attrs:{href:"https://github.com/sanic-org/sanic-openapi",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("sanic-openapi")]),s("OutboundLink")],1),t._v(" を入力検証、CORS 処理、HTTP 自動メソッドハンドラなど、ウェブアプリケーション開発者向けのより多くの機能を提供するものに置き換えることにあります。もし、お手伝いいただけるようでしたら、Discord でお知らせください。このプロジェクトの最初のリリースは、9月のリリースの前のいつか(できれば)になることを期待しています。")]),t._v(" "),s("h2",{attrs:{id:"謝礼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#謝礼"}},[t._v("#")]),t._v(" 謝礼")]),t._v(" "),s("p",[t._v("今回のリリースに参加された皆様、ありがとうございました。 👏")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/aaugustin",target:"_blank",rel:"noopener noreferrer"}},[t._v("@aaugustin"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/ahopkins",target:"_blank",rel:"noopener noreferrer"}},[t._v("@ahopkins"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/ajaygupta2790",target:"_blank",rel:"noopener noreferrer"}},[t._v("@ajaygupta2790"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/ashleysommer",target:"_blank",rel:"noopener noreferrer"}},[t._v("@ashleysommer"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/ent8r",target:"_blank",rel:"noopener noreferrer"}},[t._v("@ENT8R"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/fredlllll",target:"_blank",rel:"noopener noreferrer"}},[t._v("@fredlllll"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/graingert",target:"_blank",rel:"noopener noreferrer"}},[t._v("@graingert"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/harshanarayana",target:"_blank",rel:"noopener noreferrer"}},[t._v("@harshanarayana"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/jdraymon",target:"_blank",rel:"noopener noreferrer"}},[t._v("@jdraymon"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/kyle-verhoog",target:"_blank",rel:"noopener noreferrer"}},[t._v("@Kyle-Verhoog"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/sanjeevanahilan",target:"_blank",rel:"noopener noreferrer"}},[t._v("@sanjeevanahilan"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/sjsadowski",target:"_blank",rel:"noopener noreferrer"}},[t._v("@sjsadowski"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/tronic",target:"_blank",rel:"noopener noreferrer"}},[t._v("@Tronic"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/vltr",target:"_blank",rel:"noopener noreferrer"}},[t._v("@vltr"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/zinklu",target:"_blank",rel:"noopener noreferrer"}},[t._v("@ZinkLu"),s("OutboundLink")],1)]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("もし、このプロジェクトを楽しんでいただけるなら、ぜひ貢献をご検討ください。もちろん、コードの貢献も大好きですが、どんな形の貢献も大歓迎です。ドキュメントを書いたり、ユースケースを見せたり、会話に参加してあなたの声を伝えたり、もし可能なら"),s("a",{attrs:{href:"https://opencollective.com/sanic-org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("金銭的貢献"),s("OutboundLink")],1),t._v("も検討してください。")])])}),[],!1,null,null,null);a.default=e.exports}}]);